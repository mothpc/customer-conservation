<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/mainTemplate.xhtml">

	<ui:define name="head">
		<f:loadBundle var="msg" basename="com.adms.msg.cs.csMsg"/>
		<title>#{msg['txt.header']}</title>
		
		<style>
			.header {font-size: 2.5em !important; font:bold;}
			.grid-no-border > div {border: 0;}
			.grid-separate-less > div > div {border: 0 !important;}
			.input-width {width:90%;}
			.btn-action {width:180px;}
			.dlg-content {min-width:400px; margin-bottom:10px; border:none;}
			.dlg-content div {border:inherit !important;}
			.dlg-wrapper-footer {width:auto;text-align:left;padding-right: 0.5em;}
			
			@media ( max-width :35em ) {
				.btn-action {width:100%;margin-bottom:5px;}
			}
		</style>
	</ui:define>
	
	<ui:define name="headerCenterContent">
		<div style="width:auto;margin:0 auto;">
			<p:outputLabel value="#{msg['txt.header']}" styleClass="header" />
		</div>
	</ui:define>
	
	<ui:define name="content">
		
		<h:form id="frmMain">
			
			<ui:param name="searchParam" value="#{customerEnquiryView.model.searchDlg}" />
			<ui:param name="addCaseParam" value="#{customerEnquiryView.model.addCaseDlg}" />
		
			<p:panel id="dataPanel" header="#{msg['table.1.header']}" style="margin-top:10px;margin-bottom:0.5em;">
				<p:panelGrid id="mainGrid" columns="3" layout="grid" styleClass="grid-no-border">
					<p:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-4, ui-grid-col-8" styleClass="grid-no-border grid-separate-less">
						<p:outputLabel value="#{msg['table.1.1.1']}" for="campaignCode"/>
						<p:inputText id="campaignCode" styleClass="input-width" readonly="true"></p:inputText>
						
						<p:outputLabel value="#{msg['table.1.1.2']}" for="policyNo"/>
						<p:inputText id="policyNo" styleClass="input-width"></p:inputText>
						
						<p:outputLabel value="#{msg['table.1.1.3']}" for="inceptionDate"/>
						<p:inputText id="inceptionDate" styleClass="input-width" readonly="true"/>
					</p:panelGrid>
					
					<p:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-4, ui-grid-col-8" styleClass="grid-no-border grid-separate-less">
						
						<p:outputLabel value="#{msg['table.1.2.1']}" for="insuredName"/>
						<p:inputText id="insuredName" value="#{customerEnquiryView.model.insuredFullName}" styleClass="input-width"
							readonly="true">
						</p:inputText>
						
						<p:outputLabel value="#{msg['table.1.2.2']}" for="placeOfBirth"/>
						<p:inputText id="placeOfBirth" styleClass="input-width" readonly="true"/>
					</p:panelGrid>
					
					<p:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-4, ui-grid-col-8" styleClass="grid-no-border grid-separate-less">
						<p:outputLabel value="#{msg['table.1.3.1']}" for="policyIssueDate"/>
						<p:inputText id="policyIssueDate" styleClass="input-width" readonly="true">
							<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
						</p:inputText>
					
						<p:outputLabel value="#{msg['table.1.3.2']}" for="premiumPTD"/>
						<p:inputText id="premiumPTD" styleClass="input-width" readonly="true"/>
					</p:panelGrid>
				</p:panelGrid>
			</p:panel>
			
			<h:panelGroup id="actionPanel">
				<p:commandButton id="searchBtn" value="#{msg['btn.start.search']}" process="@this"
					icon="ui-icon-search"
					actionListener="#{customerEnquiryView.prepDlg(searchParam)}"
					oncomplete="PF('searchDlg').show();"
					update="@form"
					styleClass="btn-action">
					<ui:remove><p:ajax event="dialogReturn" update="dataPanel, actionPanel"/></ui:remove>
				</p:commandButton>
								
				<p:commandButton id="addCaseBtn" value="#{msg['btn.add.new.case']}" process="@this"
					icon="ui-icon-circle-plus" 
					actionListener="#{customerEnquiryView.prepDlg(addCaseParam)}"
					oncomplete="PF('addCaseDlg').show();"
					update="@form"
					disabled="#{customerEnquiryView.complainLogModel eq null}"
					styleClass="btn-action">
					<ui:remove><p:ajax event="dialogReturn" /></ui:remove>
				</p:commandButton>
				
				<p:commandButton id="viewBillHistBtn" value="#{msg['btn.view.billing.history']}" disabled="true" rendered="false" styleClass="btn-action"/>
				
				<p:commandButton id="clearAll" value="Clear" 
					icon="fa fa-fw fa-remove" 
					process="@this" update="frmMain" styleClass="btn-action">
					<p:resetInput target="@form" />
				</p:commandButton>
			</h:panelGroup>
			
			<ui:include src="tbl-log-hist.xhtml" />
			
			<p:dialog id="searchDlg" widgetVar="searchDlg" 
				dynamic="true" modal="true" 
				resizable="true" maximizable="true" 
				closable="false" closeOnEscape="false">
				<p:ajax event="close" update="@form" />
				
				<f:facet name="header">
					<h:outputText value="#{msg['modal.search.header.text']}" />
				</f:facet>
				
				<p:panelGrid id="searchPanel" columns="2" columnClasses="ui-grid-col-5, ui-grid-col-7" layout="grid" styleClass="dlg-content">
					<p:outputLabel value="Insured Citizen ID" for="citizenId" />
					<p:inputText id="citizenId" value="#{customerEnquiryView.model.insuredCitizenId}" style="width:100%;"/>
					
					<p:outputLabel value="Insured First Name" for="insuredFname"/>
					<p:inputText id="insuredFname" value="#{customerEnquiryView.model.insuredFname}" style="width:100%;"/>
					
					<p:outputLabel value="Insured Last Name" for="insuredLname"/>
					<p:inputText id="insuredLname" value="#{customerEnquiryView.model.insuredLname}" style="width:100%;"/>
				</p:panelGrid>
				
				<f:facet name="footer">
					<div class="dlg-wrapper-footer">
						<p:commandButton value="Submit" actionListener="#{customerEnquiryView.doSearch()}" process="@('searchPanel')" oncomplete="PF('searchDlg').hide();"/>
						<p:commandButton value="Cancel" type="button" onclick="PF('searchDlg').hide();"/>
					</div>
				</f:facet>
			</p:dialog>
			
			<p:dialog id="addCaseDlg" widgetVar="addCaseDlg" 
				dynamic="true" modal="true" 
				resizable="true" maximizable="true" 
				closable="false" closeOnEscape="false">
				<p:ajax event="close" update="@form" />
				
				<f:facet name="header">
					<h:outputText value="#{msg['modal.add.header.text']}" />
				</f:facet>
				
				<p:panelGrid id="addCasePanel" columns="2" layout="grid" styleClass="dlg-content">
				
				</p:panelGrid>
				
				<f:facet name="footer">
					<div class="dlg-wrapper-footer">
						<p:commandButton value="Cancel" type="button" onclick="PF('addCaseDlg').hide();"/>
					</div>
				</f:facet>
			</p:dialog>
			
		</h:form>
		
	</ui:define>

</ui:composition>