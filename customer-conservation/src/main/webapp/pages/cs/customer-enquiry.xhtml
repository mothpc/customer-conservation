<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/mainTemplate.xhtml">

	<ui:define name="head">
		<f:loadBundle var="msg" basename="com.adms.msg.cs.csMsg"/>
		<title>#{msg['txt.header']}</title>
		
		<style>
			.header {font-size: 2em !important; font-weight:bold;}
			.width-full {width:100%;}
			.grid-no-border > div {border: 0;}
			.grid-separate-less > div > div {border: 0 !important;}
			.grid-label-col {width:30%;max-width:14em;float:none;}
			.grid-input-col {width:70%;float:none;}
			.input-width {width:95%;}
			.btn-action {width:14em;height:2em;}
			.dlg-content {min-width:400px; margin-bottom:10px; border:none;}
			.dlg-content div {border:inherit !important;}
			.dlg-wrapper-footer {width:auto;text-align:left;padding-right: 0.5em;}
			.dlg-content td {float:none;}
			.btn-color-warn {
				background:none;
				background-image: -webkit-linear-gradient(top,#f0ad4e 0,#eb9316 100%);
				background-image: linear-gradient(to bottom,#f0ad4e 0,#eb9316 100%);
				background-color: #f0ad4e;
				border-color: #f0ad4e;
				color: #FFFFEE;
			}
			@media ( max-width :35em ) {
				.btn-action {width:100%;margin-bottom:5px;}
			}
		</style>
	</ui:define>
	
	<ui:define name="headerCenterContent">
		<div style="width:auto;margin:0 auto;">
			<p:outputLabel value="#{msg['txt.header']}" styleClass="header txt-label-shadow" />
		</div>
	</ui:define>
	
	<ui:define name="content">
		
		<h:form id="frmMain">
			
			<ui:param name="searchParam" value="#{customerEnquiryView.model.searchDlg}" />
			<ui:param name="addCaseParam" value="#{customerEnquiryView.model.addCaseDlg}" />
			<ui:param name="cus" value="#{customerEnquiryView.model.customer}" />
					
			<p:panel id="dataPanel" header="#{msg['table.1.header']}" style="margin-bottom:0.5em;">
				<p:panelGrid id="mainGrid" columns="2" layout="grid" styleClass="grid-no-border">
					<p:panelGrid columns="2" layout="grid" columnClasses="grid-label-col, grid-input-col" styleClass="grid-no-border grid-separate-less">
						<p:outputLabel value="Citizen ID" styleClass=""/>
						<p:inputText id="insuredCitizenId" value="#{cus.citizenId}" styleClass="width-full" readonly="true"/>
						
						<h:outputText value="Full Name" styleClass=""/>
						<p:inputText id="insuredFullName" value="#{cus.fullName}" styleClass="width-full" readonly="true"/>
						
						<h:outputText value="Gender" styleClass=""/>
						<p:inputText id="insuredGender" value="#{cus.gender}" styleClass="width-full" readonly="true"/>
						
					</p:panelGrid>
					
					<p:panelGrid columns="2" layout="grid" columnClasses="grid-label-col, grid-input-col" styleClass="grid-no-border grid-separate-less">
						<h:outputText value="Date of Birth" styleClass=""/>
						<p:inputText id="inusredDOB" value="#{cus.dob}" styleClass="width-full" readonly="true">
							<f:convertDateTime pattern="dd/MM/yyyy" timeZone=""/>
						</p:inputText>
						
						<h:outputText value="Marital Status" styleClass=""/>
						<p:inputText id="insuredMarital" value="#{cus.marital}" styleClass="width-full" readonly="true"/>
					</p:panelGrid>
				</p:panelGrid>
			</p:panel>
			
			<h:panelGroup id="actionPanel">
				<p:commandButton id="searchBtn" value="#{msg['btn.start.search']}" process="@this"
					icon="ui-icon-search"
					actionListener="#{customerEnquiryView.prepDlg(searchParam)}"
					oncomplete="PF('searchDlg').show();"
					update="@form"
					styleClass="btn-action">
					<ui:remove><p:ajax event="dialogReturn" update="dataPanel, actionPanel"/></ui:remove>
				</p:commandButton>
								
				<p:commandButton id="addCaseBtn" value="#{msg['btn.add.new.case']}" process="@this"
					icon="ui-icon-circle-plus" 
					actionListener="#{customerEnquiryView.prepDlg(addCaseParam)}"
					oncomplete="PF('addCaseDlg').show();"
					update="@form"
					disabled="#{customerEnquiryView.complainLogModel eq null}"
					styleClass="btn-action">
					<ui:remove><p:ajax event="dialogReturn" /></ui:remove>
				</p:commandButton>
				
				<p:commandButton id="clearAll" value="Clear" 
					icon="fa fa-undo" 
					process="@this" update="frmMain" styleClass="btn-action" >
					<p:resetInput target="@form" />
				</p:commandButton>
				
			</h:panelGroup>
			
			<ui:include src="tbl-log-hist.xhtml" />
			
			<p:dialog id="searchDlg" widgetVar="searchDlg" 
				dynamic="true" modal="true" 
				resizable="false" maximizable="false" 
				closable="true" closeOnEscape="true">
				<p:ajax event="close" update="@form" />
				
				<f:facet name="header">
					<h:outputText value="#{msg['modal.search.header.text']}" />
				</f:facet>
				
				<p:focus context="@next"/>
				<h:panelGrid id="searchPanel" columns="2" columnClasses="ui-grid-col-5, ui-grid-col-7" styleClass="dlg-content">
					<p:outputLabel value="Insured Citizen ID" for="shCitizenId" />
					<p:inputText id="shCitizenId" value="#{customerEnquiryView.shCitizenId}" style="width:100%;"/>
					
					<p:outputLabel value="Insured First Name" for="shInsuredFname"/>
					<p:inputText id="shInsuredFname" value="#{customerEnquiryView.shFirstName}" style="width:100%;"/>
					
					<p:outputLabel value="Insured Last Name" for="shInsuredLname"/>
					<p:inputText id="shInsuredLname" value="#{customerEnquiryView.shLastName}" style="width:100%;"/>
				</h:panelGrid>
				
				<f:facet name="footer">
					<div class="dlg-wrapper-footer">
						<p:commandButton value="Submit" actionListener="#{customerEnquiryView.doSearch()}" 
							process="@this, shCitizenId, shInsuredFname, shInsuredLname" 
							update="@form" 
							onstart="PF('progressDialog').show();"
							oncomplete="PF('progressDialog').hide();"/>
						<p:commandButton value="Cancel" type="button" onclick="PF('searchDlg').hide();"/>
					</div>
				</f:facet>
			</p:dialog>
			
			<p:dialog id="addCaseDlg" widgetVar="addCaseDlg" 
				dynamic="true" modal="true" 
				resizable="true" maximizable="true" 
				closable="false" closeOnEscape="false">
				<p:ajax event="close" update="@form" />
				
				<f:facet name="header">
					<h:outputText value="#{msg['modal.add.header.text']}" />
				</f:facet>
				
				<p:panelGrid id="addCasePanel" columns="2" layout="grid" styleClass="dlg-content">
				
				</p:panelGrid>
				
				<f:facet name="footer">
					<div class="dlg-wrapper-footer">
						<p:commandButton value="Cancel" type="button" onclick="PF('addCaseDlg').hide();"/>
					</div>
				</f:facet>
			</p:dialog>
			
		</h:form>
		
	</ui:define>

</ui:composition>